import _defineProperty from "@babel/runtime/helpers/defineProperty";
import _objectWithoutProperties from "@babel/runtime/helpers/objectWithoutProperties";
var _excluded = ["mockSearchResponse", "mockApiConnector"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

import SearchDriver from "../SearchDriver";
var suggestions = {
  documents: [{
    suggestion: "carlsbad"
  }, {
    suggestion: "carlsbad caverns"
  }, {
    suggestion: "carolina"
  }]
};
var searchResponse = {
  totalResults: 1000,
  totalPages: 100,
  requestId: "12345",
  facets: {},
  results: [{}, {}]
};
var autocompleteSearchResponse = {
  requestId: "6789",
  results: [{}, {}]
};
export function getMockApiConnector() {
  return {
    onAutocomplete: jest.fn().mockReturnValue({
      then: function then(cb) {
        return cb({
          autocompletedResults: autocompleteSearchResponse.results,
          autocompletedResultsRequestId: autocompleteSearchResponse.requestId,
          autocompletedSuggestions: suggestions
        });
      }
    }),
    onSearch: jest.fn().mockReturnValue({
      then: function then(cb) {
        return cb(searchResponse);
      }
    }),
    onResultClick: jest.fn().mockReturnValue({
      then: function then() {}
    }),
    onAutocompleteResultClick: jest.fn().mockReturnValue({
      then: function then() {}
    })
  };
}
export function setupDriver() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      mockSearchResponse = _ref.mockSearchResponse,
      mockApiConnector = _ref.mockApiConnector,
      rest = _objectWithoutProperties(_ref, _excluded);

  mockApiConnector = mockApiConnector || getMockApiConnector();

  if (mockSearchResponse) {
    mockApiConnector.onSearch = jest.fn().mockReturnValue({
      then: function then(cb) {
        return cb(mockSearchResponse);
      }
    });
  }

  var driver = new SearchDriver(_objectSpread(_objectSpread({
    apiConnector: mockApiConnector
  }, rest), {}, {
    // We don't want to deal with async in our tests, so pass 0 so URL state
    // pushes happen synchronously
    urlPushDebounceLength: 0
  }));
  var updatedStateAfterAction = {};
  driver.subscribeToStateChanges(function (newState) {
    updatedStateAfterAction.state = newState;
  });
  jest.runAllTimers();
  return {
    stateAfterCreation: driver.getState(),
    driver: driver,
    updatedStateAfterAction: updatedStateAfterAction,
    mockApiConnector: mockApiConnector
  };
}
export function doesStateHaveResponseData(response) {
  var requestId = response.requestId,
      results = response.results,
      totalPages = response.totalPages,
      totalResults = response.totalResults,
      wasSearched = response.wasSearched;
  return !!results && results.length && !!requestId && totalPages > 0 && totalResults > 0 && !!wasSearched;
}
export function getSearchCalls(mockApiConnector) {
  return mockApiConnector.onSearch.mock.calls;
}
export function getAutocompleteCalls(mockApiConnector) {
  return mockApiConnector.onAutocomplete.mock.calls;
}
export function getClickCalls(mockApiConnector) {
  return mockApiConnector.onResultClick.mock.calls;
}
export function getAutocompleteClickCalls(mockApiConnector) {
  return mockApiConnector.onAutocompleteResultClick.mock.calls;
}
/**
 * Returns a promise that resolves after the current event loop.
 *
 * Useful for writing `await waitATick()` to wait for a promise to resolve.
 */

export function waitATick() {
  var promiseResolve;
  var promise = new Promise(function (resolve) {
    return promiseResolve = resolve;
  });
  setTimeout(function () {
    return promiseResolve();
  });
  jest.runAllTimers();
  return promise;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L2hlbHBlcnMuanMiXSwibmFtZXMiOlsiU2VhcmNoRHJpdmVyIiwic3VnZ2VzdGlvbnMiLCJkb2N1bWVudHMiLCJzdWdnZXN0aW9uIiwic2VhcmNoUmVzcG9uc2UiLCJ0b3RhbFJlc3VsdHMiLCJ0b3RhbFBhZ2VzIiwicmVxdWVzdElkIiwiZmFjZXRzIiwicmVzdWx0cyIsImF1dG9jb21wbGV0ZVNlYXJjaFJlc3BvbnNlIiwiZ2V0TW9ja0FwaUNvbm5lY3RvciIsIm9uQXV0b2NvbXBsZXRlIiwiamVzdCIsImZuIiwibW9ja1JldHVyblZhbHVlIiwidGhlbiIsImNiIiwiYXV0b2NvbXBsZXRlZFJlc3VsdHMiLCJhdXRvY29tcGxldGVkUmVzdWx0c1JlcXVlc3RJZCIsImF1dG9jb21wbGV0ZWRTdWdnZXN0aW9ucyIsIm9uU2VhcmNoIiwib25SZXN1bHRDbGljayIsIm9uQXV0b2NvbXBsZXRlUmVzdWx0Q2xpY2siLCJzZXR1cERyaXZlciIsIm1vY2tTZWFyY2hSZXNwb25zZSIsIm1vY2tBcGlDb25uZWN0b3IiLCJyZXN0IiwiZHJpdmVyIiwiYXBpQ29ubmVjdG9yIiwidXJsUHVzaERlYm91bmNlTGVuZ3RoIiwidXBkYXRlZFN0YXRlQWZ0ZXJBY3Rpb24iLCJzdWJzY3JpYmVUb1N0YXRlQ2hhbmdlcyIsIm5ld1N0YXRlIiwic3RhdGUiLCJydW5BbGxUaW1lcnMiLCJzdGF0ZUFmdGVyQ3JlYXRpb24iLCJnZXRTdGF0ZSIsImRvZXNTdGF0ZUhhdmVSZXNwb25zZURhdGEiLCJyZXNwb25zZSIsIndhc1NlYXJjaGVkIiwibGVuZ3RoIiwiZ2V0U2VhcmNoQ2FsbHMiLCJtb2NrIiwiY2FsbHMiLCJnZXRBdXRvY29tcGxldGVDYWxscyIsImdldENsaWNrQ2FsbHMiLCJnZXRBdXRvY29tcGxldGVDbGlja0NhbGxzIiwid2FpdEFUaWNrIiwicHJvbWlzZVJlc29sdmUiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0s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Q0FBbUNyQixnQkFBbkMsRUFBcUQ7QUFDMUQsU0FBT0EsZ0JBQWdCLENBQUNILHlCQUFqQixDQUEyQ29CLElBQTNDLENBQWdEQyxLQUF2RDtBQUNEO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQSxPQUFPLFNBQVNJLFNBQVQsR0FBcUI7QUFDMUIsTUFBSUMsY0FBSjtBQUNBLE1BQU1DLE9BQU8sR0FBRyxJQUFJQyxPQUFKLENBQVksVUFBQUMsT0FBTztBQUFBLFdBQUtILGNBQWMsR0FBR0csT0FBdEI7QUFBQSxHQUFuQixDQUFoQjtBQUNBQyxFQUFBQSxVQUFVLENBQUM7QUFBQSxXQUFNSixjQUFjLEVBQXBCO0FBQUEsR0FBRCxDQUFWO0FBQ0FwQyxFQUFBQSxJQUFJLENBQUNzQixZQUFMO0FBQ0EsU0FBT2UsT0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlYXJjaERyaXZlciBmcm9tIFwiLi4vU2VhcmNoRHJpdmVyXCI7XG5cbmNvbnN0IHN1Z2dlc3Rpb25zID0ge1xuICBkb2N1bWVudHM6IFtcbiAgICB7XG4gICAgICBzdWdnZXN0aW9uOiBcImNhcmxzYmFkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHN1Z2dlc3Rpb246IFwiY2FybHNiYWQgY2F2ZXJuc1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBzdWdnZXN0aW9uOiBcImNhcm9saW5hXCJcbiAgICB9XG4gIF1cbn07XG5cbmNvbnN0IHNlYXJjaFJlc3BvbnNlID0ge1xuICB0b3RhbFJlc3VsdHM6IDEwMDAsXG4gIHRvdGFsUGFnZXM6IDEwMCxcbiAgcmVxdWVzdElkOiBcIjEyMzQ1XCIsXG4gIGZhY2V0czoge30sXG4gIHJlc3VsdHM6IFt7fSwge31dXG59O1xuXG5jb25zdCBhdXRvY29tcGxldGVTZWFyY2hSZXNwb25zZSA9IHtcbiAgcmVxdWVzdElkOiBcIjY3ODlcIixcbiAgcmVzdWx0czogW3t9LCB7fV1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2NrQXBpQ29ubmVjdG9yKCkge1xuICByZXR1cm4ge1xuICAgIG9uQXV0b2NvbXBsZXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHRoZW46IGNiID0+XG4gICAgICAgIGNiKHtcbiAgICAgICAgICBhdXRvY29tcGxldGVkUmVzdWx0czogYXV0b2NvbXBsZXRlU2VhcmNoUmVzcG9uc2UucmVzdWx0cyxcbiAgICAgICAgICBhdXRvY29tcGxldGVkUmVzdWx0c1JlcXVlc3RJZDogYXV0b2NvbXBsZXRlU2VhcmNoUmVzcG9uc2UucmVxdWVzdElkLFxuICAgICAgICAgIGF1dG9jb21wbGV0ZWRTdWdnZXN0aW9uczogc3VnZ2VzdGlvbnNcbiAgICAgICAgfSlcbiAgICB9KSxcbiAgICBvblNlYXJjaDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHRoZW46IGNiID0+IGNiKHNlYXJjaFJlc3BvbnNlKSB9KSxcbiAgICBvblJlc3VsdENsaWNrOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgdGhlbjogKCkgPT4ge30gfSksXG4gICAgb25BdXRvY29tcGxldGVSZXN1bHRDbGljazogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHRoZW46ICgpID0+IHt9IH0pXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cERyaXZlcih7XG4gIG1vY2tTZWFyY2hSZXNwb25zZSxcbiAgbW9ja0FwaUNvbm5lY3RvcixcbiAgLi4ucmVzdFxufSA9IHt9KSB7XG4gIG1vY2tBcGlDb25uZWN0b3IgPSBtb2NrQXBpQ29ubmVjdG9yIHx8IGdldE1vY2tBcGlDb25uZWN0b3IoKTtcblxuICBpZiAobW9ja1NlYXJjaFJlc3BvbnNlKSB7XG4gICAgbW9ja0FwaUNvbm5lY3Rvci5vblNlYXJjaCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgdGhlbjogY2IgPT4gY2IobW9ja1NlYXJjaFJlc3BvbnNlKVxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgZHJpdmVyID0gbmV3IFNlYXJjaERyaXZlcih7XG4gICAgYXBpQ29ubmVjdG9yOiBtb2NrQXBpQ29ubmVjdG9yLFxuICAgIC8vIFBhc3MsIGUuZy4sIGluaXRpYWxTdGF0ZSBhbmQgYWxsIG90aGVyIGNvbmZpZ3NcbiAgICAuLi5yZXN0LFxuICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGFzeW5jIGluIG91ciB0ZXN0cywgc28gcGFzcyAwIHNvIFVSTCBzdGF0ZVxuICAgIC8vIHB1c2hlcyBoYXBwZW4gc3luY2hyb25vdXNseVxuICAgIHVybFB1c2hEZWJvdW5jZUxlbmd0aDogMFxuICB9KTtcblxuICBjb25zdCB1cGRhdGVkU3RhdGVBZnRlckFjdGlvbiA9IHt9O1xuICBkcml2ZXIuc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZXMobmV3U3RhdGUgPT4ge1xuICAgIHVwZGF0ZWRTdGF0ZUFmdGVyQWN0aW9uLnN0YXRlID0gbmV3U3RhdGU7XG4gIH0pO1xuXG4gIGplc3QucnVuQWxsVGltZXJzKCk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0ZUFmdGVyQ3JlYXRpb246IGRyaXZlci5nZXRTdGF0ZSgpLFxuICAgIGRyaXZlcixcbiAgICB1cGRhdGVkU3RhdGVBZnRlckFjdGlvbixcbiAgICBtb2NrQXBpQ29ubmVjdG9yXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb2VzU3RhdGVIYXZlUmVzcG9uc2VEYXRhKHJlc3BvbnNlKSB7XG4gIGNvbnN0IHtcbiAgICByZXF1ZXN0SWQsXG4gICAgcmVzdWx0cyxcbiAgICB0b3RhbFBhZ2VzLFxuICAgIHRvdGFsUmVzdWx0cyxcbiAgICB3YXNTZWFyY2hlZFxuICB9ID0gcmVzcG9uc2U7XG4gIHJldHVybiAoXG4gICAgISFyZXN1bHRzICYmXG4gICAgcmVzdWx0cy5sZW5ndGggJiZcbiAgICAhIXJlcXVlc3RJZCAmJlxuICAgIHRvdGFsUGFnZXMgPiAwICYmXG4gICAgdG90YWxSZXN1bHRzID4gMCAmJlxuICAgICEhd2FzU2VhcmNoZWRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlYXJjaENhbGxzKG1vY2tBcGlDb25uZWN0b3IpIHtcbiAgcmV0dXJuIG1vY2tBcGlDb25uZWN0b3Iub25TZWFyY2gubW9jay5jYWxscztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dG9jb21wbGV0ZUNhbGxzKG1vY2tBcGlDb25uZWN0b3IpIHtcbiAgcmV0dXJuIG1vY2tBcGlDb25uZWN0b3Iub25BdXRvY29tcGxldGUubW9jay5jYWxscztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENsaWNrQ2FsbHMobW9ja0FwaUNvbm5lY3Rvcikge1xuICByZXR1cm4gbW9ja0FwaUNvbm5lY3Rvci5vblJlc3VsdENsaWNrLm1vY2suY2FsbHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRvY29tcGxldGVDbGlja0NhbGxzKG1vY2tBcGlDb25uZWN0b3IpIHtcbiAgcmV0dXJuIG1vY2tBcGlDb25uZWN0b3Iub25BdXRvY29tcGxldGVSZXN1bHRDbGljay5tb2NrLmNhbGxzO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgbG9vcC5cbiAqXG4gKiBVc2VmdWwgZm9yIHdyaXRpbmcgYGF3YWl0IHdhaXRBVGljaygpYCB0byB3YWl0IGZvciBhIHByb21pc2UgdG8gcmVzb2x2ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRBVGljaygpIHtcbiAgbGV0IHByb21pc2VSZXNvbHZlO1xuICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiAocHJvbWlzZVJlc29sdmUgPSByZXNvbHZlKSk7XG4gIHNldFRpbWVvdXQoKCkgPT4gcHJvbWlzZVJlc29sdmUoKSk7XG4gIGplc3QucnVuQWxsVGltZXJzKCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuIl19