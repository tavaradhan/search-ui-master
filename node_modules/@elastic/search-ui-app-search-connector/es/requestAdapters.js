import _defineProperty from "@babel/runtime/helpers/defineProperty";
import _objectWithoutProperties from "@babel/runtime/helpers/objectWithoutProperties";
var _excluded = ["name"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function removeName(v) {
  if (v && v.name) {
    // eslint-disable-next-line
    var name = v.name,
        rest = _objectWithoutProperties(v, _excluded);

    return _objectSpread({}, rest);
  }

  return v;
}

function rollup(f) {
  var values = f.values.map(removeName).map(function (v) {
    return _defineProperty({}, f.field, v);
  });
  return _defineProperty({}, f.type || "any", values);
}

function adaptFilters(filters) {
  if (!filters || filters.length === 0) return {};
  var all = filters.map(rollup);
  return {
    all: all
  };
}

function getSort(sortDirection, sortField, sortList) {
  if (sortList && sortList.length) {
    return sortList.map(function (sortItem) {
      return _defineProperty({}, sortItem.field, sortItem.direction);
    });
  } else if (sortField && sortDirection) {
    return _defineProperty({}, sortField, sortDirection);
  } else {
    return undefined;
  }
}

export function adaptRequest(request) {
  var current = request.current,
      resultsPerPage = request.resultsPerPage,
      searchTerm = request.searchTerm,
      sortDirection = request.sortDirection,
      sortField = request.sortField,
      sortList = request.sortList;
  var sort = getSort(sortDirection, sortField, sortList);
  return _objectSpread(_objectSpread({
    query: searchTerm
  }, sort !== undefined && {
    sort: sort
  }), {}, {
    page: _objectSpread(_objectSpread({}, resultsPerPage !== undefined && {
      size: resultsPerPage
    }), current !== undefined && {
      current: current
    }),
    filters: adaptFilters(request.filters)
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZXF1ZXN0QWRhcHRlcnMuanMiXSwibmFtZXMiOlsicmVtb3ZlTmFtZSIsInYiLCJuYW1lIiwicmVzdCIsInJvbGx1cCIsImYiLCJ2YWx1ZXMiLCJtYXAiLCJmaWVsZCIsInR5cGUiLCJhZGFwdEZpbHRlcnMiLCJmaWx0ZXJzIiwibGVuZ3RoIiwiYWxsIiwiZ2V0U29ydCIsInNvcnREaXJlY3Rpb24iLCJzb3J0RmllbGQiLCJzb3J0TGlzdCIsInNvcnRJdGVtIiwiZGlyZWN0aW9uIiwidW5kZWZpbmVkIiwiYWRhcHRSZXF1ZXN0IiwicmVxdWVzdCIsImN1cnJlbnQiLCJyZXN1bHRzUGVyUGFnZSIsInNlYXJjaFRlcm0iLCJzb3J0IiwicXVlcnkiLCJwYWdlIiwic2l6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxTQUFTQSxVQUFULENBQW9CQyxDQUFwQixFQUF1QjtBQUNyQixNQUFJQSxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsSUFBWCxFQUFpQjtBQUNmO0FBQ0EsUUFBUUEsSUFBUixHQUEwQkQsQ0FBMUIsQ0FBUUMsSUFBUjtBQUFBLFFBQWlCQyxJQUFqQiw0QkFBMEJGLENBQTFCOztBQUNBLDZCQUNLRSxJQURMO0FBR0Q7O0FBRUQsU0FBT0YsQ0FBUDtBQUNEOztBQUVELFNBQVNHLE1BQVQsQ0FBZ0JDLENBQWhCLEVBQW1CO0FBQ2pCLE1BQU1DLE1BQU0sR0FBR0QsQ0FBQyxDQUFDQyxNQUFGLENBQVNDLEdBQVQsQ0FBYVAsVUFBYixFQUF5Qk8sR0FBekIsQ0FBNkIsVUFBQU4sQ0FBQztBQUFBLCtCQUMxQ0ksQ0FBQyxDQUFDRyxLQUR3QyxFQUNoQ1AsQ0FEZ0M7QUFBQSxHQUE5QixDQUFmO0FBSUEsNkJBQ0dJLENBQUMsQ0FBQ0ksSUFBRixJQUFVLEtBRGIsRUFDcUJILE1BRHJCO0FBR0Q7O0FBRUQsU0FBU0ksWUFBVCxDQUFzQkMsT0FBdEIsRUFBK0I7QUFDN0IsTUFBSSxDQUFDQSxPQUFELElBQVlBLE9BQU8sQ0FBQ0MsTUFBUixLQUFtQixDQUFuQyxFQUFzQyxPQUFPLEVBQVA7QUFDdEMsTUFBTUMsR0FBRyxHQUFHRixPQUFPLENBQUNKLEdBQVIsQ0FBWUgsTUFBWixDQUFaO0FBQ0EsU0FBTztBQUNMUyxJQUFBQSxHQUFHLEVBQUhBO0FBREssR0FBUDtBQUdEOztBQUVELFNBQVNDLE9BQVQsQ0FBaUJDLGFBQWpCLEVBQWdDQyxTQUFoQyxFQUEyQ0MsUUFBM0MsRUFBcUQ7QUFDbkQsTUFBSUEsUUFBUSxJQUFJQSxRQUFRLENBQUNMLE1BQXpCLEVBQWlDO0FBQy9CLFdBQU9LLFFBQVEsQ0FBQ1YsR0FBVCxDQUFhLFVBQUFXLFFBQVE7QUFBQSxpQ0FBUUEsUUFBUSxDQUFDVixLQUFqQixFQUF5QlUsUUFBUSxDQUFDQyxTQUFsQztBQUFBLEtBQXJCLENBQVA7QUFDRCxHQUZELE1BRU8sSUFBSUgsU0FBUyxJQUFJRCxhQUFqQixFQUFnQztBQUNyQywrQkFDR0MsU0FESCxFQUNlRCxhQURmO0FBR0QsR0FKTSxNQUlBO0FBQ0wsV0FBT0ssU0FBUDtBQUNEO0FBQ0Y7O0FBRUQsT0FBTyxTQUFTQyxZQUFULENBQXNCQyxPQUF0QixFQUErQjtBQUNwQyxNQUNFQyxPQURGLEdBT0lELE9BUEosQ0FDRUMsT0FERjtBQUFBLE1BRUVDLGNBRkYsR0FPSUYsT0FQSixDQUVFRSxjQUZGO0FBQUEsTUFHRUMsVUFIRixHQU9JSCxPQVBKLENBR0VHLFVBSEY7QUFBQSxNQUlFVixhQUpGLEdBT0lPLE9BUEosQ0FJRVAsYUFKRjtBQUFBLE1BS0VDLFNBTEYsR0FPSU0sT0FQSixDQUtFTixTQUxGO0FBQUEsTUFNRUMsUUFORixHQU9JSyxPQVBKLENBTUVMLFFBTkY7QUFTQSxNQUFNUyxJQUFJLEdBQUdaLE9BQU8sQ0FBQ0MsYUFBRCxFQUFnQkMsU0FBaEIsRUFBMkJDLFFBQTNCLENBQXBCO0FBQ0E7QUFDRVUsSUFBQUEsS0FBSyxFQUFFRjtBQURULEtBRU1DLElBQUksS0FBS04sU0FBVCxJQUFzQjtBQUFFTSxJQUFBQSxJQUFJLEVBQUpBO0FBQUYsR0FGNUI7QUFHRUUsSUFBQUEsSUFBSSxrQ0FDRUosY0FBYyxLQUFLSixTQUFuQixJQUFnQztBQUFFUyxNQUFBQSxJQUFJLEVBQUVMO0FBQVIsS0FEbEMsR0FFRUQsT0FBTyxLQUFLSCxTQUFaLElBQXlCO0FBQUVHLE1BQUFBLE9BQU8sRUFBUEE7QUFBRixLQUYzQixDQUhOO0FBT0VaLElBQUFBLE9BQU8sRUFBRUQsWUFBWSxDQUFDWSxPQUFPLENBQUNYLE9BQVQ7QUFQdkI7QUFTRCIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJlbW92ZU5hbWUodikge1xuICBpZiAodiAmJiB2Lm5hbWUpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCB7IG5hbWUsIC4uLnJlc3QgfSA9IHY7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlc3RcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHY7XG59XG5cbmZ1bmN0aW9uIHJvbGx1cChmKSB7XG4gIGNvbnN0IHZhbHVlcyA9IGYudmFsdWVzLm1hcChyZW1vdmVOYW1lKS5tYXAodiA9PiAoe1xuICAgIFtmLmZpZWxkXTogdlxuICB9KSk7XG5cbiAgcmV0dXJuIHtcbiAgICBbZi50eXBlIHx8IFwiYW55XCJdOiB2YWx1ZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gYWRhcHRGaWx0ZXJzKGZpbHRlcnMpIHtcbiAgaWYgKCFmaWx0ZXJzIHx8IGZpbHRlcnMubGVuZ3RoID09PSAwKSByZXR1cm4ge307XG4gIGNvbnN0IGFsbCA9IGZpbHRlcnMubWFwKHJvbGx1cCk7XG4gIHJldHVybiB7XG4gICAgYWxsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFNvcnQoc29ydERpcmVjdGlvbiwgc29ydEZpZWxkLCBzb3J0TGlzdCkge1xuICBpZiAoc29ydExpc3QgJiYgc29ydExpc3QubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHNvcnRMaXN0Lm1hcChzb3J0SXRlbSA9PiAoeyBbc29ydEl0ZW0uZmllbGRdOiBzb3J0SXRlbS5kaXJlY3Rpb24gfSkpO1xuICB9IGVsc2UgaWYgKHNvcnRGaWVsZCAmJiBzb3J0RGlyZWN0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtzb3J0RmllbGRdOiBzb3J0RGlyZWN0aW9uXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGFwdFJlcXVlc3QocmVxdWVzdCkge1xuICBjb25zdCB7XG4gICAgY3VycmVudCxcbiAgICByZXN1bHRzUGVyUGFnZSxcbiAgICBzZWFyY2hUZXJtLFxuICAgIHNvcnREaXJlY3Rpb24sXG4gICAgc29ydEZpZWxkLFxuICAgIHNvcnRMaXN0XG4gIH0gPSByZXF1ZXN0O1xuXG4gIGNvbnN0IHNvcnQgPSBnZXRTb3J0KHNvcnREaXJlY3Rpb24sIHNvcnRGaWVsZCwgc29ydExpc3QpO1xuICByZXR1cm4ge1xuICAgIHF1ZXJ5OiBzZWFyY2hUZXJtLFxuICAgIC4uLihzb3J0ICE9PSB1bmRlZmluZWQgJiYgeyBzb3J0IH0pLFxuICAgIHBhZ2U6IHtcbiAgICAgIC4uLihyZXN1bHRzUGVyUGFnZSAhPT0gdW5kZWZpbmVkICYmIHsgc2l6ZTogcmVzdWx0c1BlclBhZ2UgfSksXG4gICAgICAuLi4oY3VycmVudCAhPT0gdW5kZWZpbmVkICYmIHsgY3VycmVudCB9KVxuICAgIH0sXG4gICAgZmlsdGVyczogYWRhcHRGaWx0ZXJzKHJlcXVlc3QuZmlsdGVycylcbiAgfTtcbn1cbiJdfQ==